<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Birthday Hunt</title>
  <style>
    :root{
      --bg:#050505;

      /* torch position (starts off-screen so nothing is revealed) */
      --x:-9999px;
      --y:-9999px;

      /* torch look */
      --r:170px;     /* visible core */
      --soft:130px;  /* feather */
      --dim:0.92;    /* darkness overlay (higher = darker) */
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    body{ background:var(--bg); overflow:hidden; }

    .stage{
      position:relative;
      height:100vh; width:100vw;
      background: var(--bg);
      cursor:none;
    }

    /* Realistic darkness: vignette + slight noise */
    .stage::before{
      content:"";
      position:absolute; inset:-80px;
      background:
        radial-gradient(circle at 50% 40%, rgba(255,255,255,.03), transparent 55%),
        radial-gradient(circle at 50% 50%, transparent 35%, rgba(0,0,0,.55) 75%),
        repeating-linear-gradient(0deg, rgba(255,255,255,.012), rgba(255,255,255,.012) 1px, transparent 1px, transparent 3px);
      opacity:.35;
      pointer-events:none;
      filter: blur(.2px);
      z-index:0;
    }

    /* content layer */
    .content{
      position:absolute; inset:0;
      display:grid;
      place-items:center;
      padding:28px;
      text-align:center;
      z-index:1;
    }

    /* ---- The "silhouette" text (visible faintly even in dark) ---- */
    .hint-wrap{
      max-width: 820px;
      position:relative;
      padding: 18px 20px;
    }

    /* silhouette (embossed shadow only) */
    .hint-shadow{
      font-size: clamp(18px, 2.4vw, 32px);
      line-height: 1.25;
      color: rgba(255,255,255,.02); /* almost invisible fill */
      text-shadow:
        0 1px 0 rgba(255,255,255,.05),
        0 -1px 0 rgba(0,0,0,.55),
        0 0 18px rgba(0,0,0,.9);
      letter-spacing:.2px;
      user-select:none;
    }

    /* actual readable text (only looks good when torch reveals it) */
    .hint-real{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      padding: 18px 20px;
      font-size: clamp(18px, 2.4vw, 32px);
      line-height: 1.25;
      color: rgba(255,255,255,.93);
      text-shadow: 0 1px 14px rgba(0,0,0,.75);
      opacity: 1;
      user-select:none;
      pointer-events:none;
    }

    .hint-real small{
      display:block;
      margin-top: 14px;
      font-size: 13px;
      color: rgba(255,255,255,.70);
    }

    /* camouflaged button */
    .secret{
      position:absolute;
      top:14px; left:14px;
      width:46px; height:46px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.06);
      background: rgba(255,255,255,.02);
      color: rgba(255,255,255,.08);
      display:grid;
      place-items:center;
      z-index:2;
      transition: .15s ease;
      -webkit-tap-highlight-color: transparent;
      text-decoration:none;
    }
    .secret.revealed{
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.88);
      box-shadow: 0 0 0 6px rgba(255,255,255,.04), 0 16px 50px rgba(0,0,0,.55);
    }

    /* darkness overlay with a torch-hole (dim reveal) */
    .overlay{
      position:absolute; inset:0;
      z-index:3;
      pointer-events:none;
      background: rgba(0,0,0,var(--dim));

      /* The actual hole */
      -webkit-mask-image: radial-gradient(circle at var(--x) var(--y),
        rgba(0,0,0,0) 0,
        rgba(0,0,0,0) calc(var(--r) - var(--soft)),
        rgba(0,0,0,1) var(--r));
      mask-image: radial-gradient(circle at var(--x) var(--y),
        rgba(0,0,0,0) 0,
        rgba(0,0,0,0) calc(var(--r) - var(--soft)),
        rgba(0,0,0,1) var(--r));
    }

    /* extra "beam" highlight inside the torch to feel more real */
    .beam{
      position:absolute; inset:0;
      z-index:2;
      pointer-events:none;
      background:
        radial-gradient(circle at var(--x) var(--y),
          rgba(255,255,255,.10) 0,
          rgba(255,255,255,.05) 120px,
          transparent 220px);
      mix-blend-mode: screen;
      opacity:.55;
    }

    /* torch emoji cursor */
    .torch{
      position:fixed;
      left:0; top:0;
      transform: translate(-50%, -50%);
      z-index:10;
      font-size: 26px;
      pointer-events:none;
      opacity: 0; /* hidden until first move */
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.85));
    }

    /* Help note */
    .note{
      position:absolute;
      left:50%; bottom:16px;
      transform: translateX(-50%);
      z-index:4;
      font-size: 13px;
      color: rgba(255,255,255,.55);
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.06);
      padding: 10px 12px;
      border-radius: 12px;
      backdrop-filter: blur(6px);
      pointer-events:none;
    }

    /* Keyboard fallback: press T to show everything */
    .no-torch{ cursor:auto; }
    .no-torch .overlay, .no-torch .beam{ display:none; }
    .no-torch .torch{ display:none; }
  </style>
</head>
<body>
  <div class="stage" id="stage" aria-label="Hunt page">

    <a class="secret" id="secret" href="find.html" aria-label="Hidden top-left button to continue">âœ¦</a>

    <div class="content">
      <div class="hint-wrap">
        <!-- faint silhouette always there -->
        <div class="hint-shadow">
          click on the top left button [it is camouflaged btw]
        </div>

        <!-- readable text sits in same place, but only becomes readable when torch reveals -->
        <div class="hint-real" aria-hidden="true">
          click on the top left button [it is camouflaged btw]
          <small>Move your mouse/finger. Press <b>T</b> to toggle torch.</small>
        </div>
      </div>
    </div>

    <div class="beam" aria-hidden="true"></div>
    <div class="overlay" aria-hidden="true"></div>

    <div class="note">ðŸ”¦ Move your mouse.</div>
  </div>

  <div class="torch" id="torch">ðŸ”¦</div>

  <script>
    const stage = document.getElementById('stage');
    const secret = document.getElementById('secret');
    const torch = document.getElementById('torch');

    // Start with torch off-screen; reveal only after first pointer move/touch
    let started = false;
    let x = -9999, y = -9999;
    let raf = 0;

    function setVars(nx, ny){
      x = nx; y = ny;
      if(raf) return;
      raf = requestAnimationFrame(() => {
        raf = 0;
        document.documentElement.style.setProperty('--x', x + 'px');
        document.documentElement.style.setProperty('--y', y + 'px');

        // position emoji torch
        torch.style.left = x + 'px';
        torch.style.top = y + 'px';

        // reveal secret button when torch is close
        revealIfNear();
      });
    }

    function revealIfNear(){
      const r = secret.getBoundingClientRect();
      const bx = r.left + r.width/2;
      const by = r.top + r.height/2;
      const dist = Math.hypot(bx - x, by - y);
      secret.classList.toggle('revealed', !stage.classList.contains('no-torch') && started && dist < 170);
    }

    function beginIfNeeded(){
      if(started) return;
      started = true;
      torch.style.opacity = '1';
    }

    window.addEventListener('pointermove', (e) => {
      if(stage.classList.contains('no-torch')) return;
      beginIfNeeded();
      setVars(e.clientX, e.clientY);
    }, {passive:true});

    window.addEventListener('touchstart', (e) => {
      if(stage.classList.contains('no-torch')) return;
      if(!e.touches || !e.touches[0]) return;
      beginIfNeeded();
      setVars(e.touches[0].clientX, e.touches[0].clientY);
    }, {passive:true});

    window.addEventListener('touchmove', (e) => {
      if(stage.classList.contains('no-torch')) return;
      if(!e.touches || !e.touches[0]) return;
      beginIfNeeded();
      setVars(e.touches[0].clientX, e.touches[0].clientY);
    }, {passive:true});

    window.addEventListener('resize', () => {
      if(!started) return;
      setVars(Math.min(x, innerWidth-1), Math.min(y, innerHeight-1));
    });

    // Torch toggle
    window.addEventListener('keydown', (e) => {
      if(e.key.toLowerCase() === 't'){
        stage.classList.toggle('no-torch');
        // if torch is off, make secret visible enough
        if(stage.classList.contains('no-torch')){
          secret.classList.add('revealed');
        }else{
          secret.classList.remove('revealed');
          if(started) revealIfNear();
        }
      }
    });
  </script>
</body>
</html>
